<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"  lang="en-us">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>Why Write a Programming Language | Ian&#39;s Website</title>

<meta property='og:title' content='Why Write a Programming Language - Ian&#39;s Website'>
<meta property='og:description' content='What does it mean to make a programming language'>
<meta property='og:url' content='http://ian.shehadeh.net/posts/02-precise-integers/'>
<meta property='og:site_name' content='Ian&#39;s Website'>
<meta property='og:type' content='article'><meta property='og:image' content='https://www.gravatar.com/avatar/4b31309cb12569288f0cc3c474dad7ab?s=256'><meta property='article:section' content='Posts'><meta property='article:published_time' content='2024-11-07T18:12:00-04:00'><meta property='article:modified_time' content='2024-11-07T18:12:00-04:00'><meta name='twitter:card' content='summary'><meta name='twitter:site' content='@'><meta name='twitter:creator' content='@'>




<link rel="stylesheet" href="/css/style.css">



<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
<link rel="canonical" href="http://ian.shehadeh.net/posts/02-precise-integers/">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#ffffff">
</head>
<body>

<section class="section">
  <div class="container">
    <nav id="nav-main" class="nav">
      <div id="nav-name" class="nav-left">
        <a id="nav-anchor" class="nav-item" href="http://ian.shehadeh.net/">
          <h1 id="nav-heading" class="title is-4">Ian&#39;s Website</h1>
        </a>
      </div>
      <div class="nav-right">
        <nav id="nav-items" class="nav-item level is-mobile"><a class="level-item" aria-label="github" href='https://github.com/ishehadeh'
            target='_blank' rel='me noopener'>
            <span class="icon">
              <i class><svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"/>
    
  </svg>
</i>
            </span>
          </a><a class="level-item" aria-label="mastodon" href='https://indieweb.social/@ianshehadeh'
            target='_blank' rel='me noopener'>
            <span class="icon">
              <i class><svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <path d="M 11.966876,0.80329086 C 9.1123466,0.82665791 6.3664935,1.1367094 4.7662978,1.8737549 c 0,0 -3.1736685,1.4237835 -3.1736685,6.2815982 0,1.1123884 -0.021554,2.4424309 0.013571,3.8529439 0.1152443,4.750677 0.8683725,9.432704 5.2479219,10.595273 2.0193066,0.53604 3.7531218,0.648348 5.1494078,0.571373 2.532141,-0.140797 3.953603,-0.906282 3.953603,-0.906282 l -0.08353,-1.842608 c 0,0 -1.809527,0.572181 -3.841713,0.50245 -2.013417,-0.06922 -4.138986,-0.217713 -4.4646269,-2.696937 -0.030082,-0.217772 -0.045075,-0.450712 -0.045075,-0.695267 0,0 1.9765387,0.484554 4.4813709,0.599656 1.531629,0.07049 2.9679,-0.08996 4.426746,-0.264563 2.797636,-0.335045 5.233581,-2.063856 5.539741,-3.643517 0.482392,-2.488386 0.442651,-6.0725219 0.442651,-6.0725219 0,-4.8578147 -3.173492,-6.2815982 -3.173492,-6.2815982 C 17.639136,1.1367094 14.891579,0.82669685 12.03704,0.80329086 Z"/>
  <path d="M 6.4286668,14.016701 V 9.1034254 c 0,-1.0041614 0.2549569,-1.8022059 0.7670342,-2.3925638 0.5280486,-0.590366 1.2196579,-0.8929946 2.0781049,-0.8929946 0.9931961,0 1.7452181,0.3828583 2.2425191,1.1486808 L 11.999859,7.7793695 12,11.451148 11.999859,7.7793695 12.483392,6.9665478 C 12.980596,6.2007253 13.732618,5.817867 14.72592,5.817867 c 0.858341,0 1.549951,0.3026286 2.078097,0.8929946 0.511971,0.5903579 0.766887,1.3884024 0.766887,2.3925638 v 4.9132756" />
    
  </svg>
</i>
            </span>
          </a><a class="level-item" aria-label="linkedin" href='https://linkedin.com/in/ian-shehadeh-421480160'
            target='_blank' rel='me noopener'>
            <span class="icon">
              <i class><svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <path stroke-width="1.8" d="m5.839218,4.101561c0,1.211972 -0.974141,2.194011 -2.176459,2.194011s-2.176459,-0.982039 -2.176459,-2.194011c0,-1.211094 0.974141,-2.194011 2.176459,-2.194011s2.176459,0.982917 2.176459,2.194011zm0.017552,3.94922l-4.388022,0l0,14.04167l4.388022,0l0,-14.04167zm7.005038,0l-4.359939,0l0,14.04167l4.360816,0l0,-7.370999c0,-4.098413 5.291077,-4.433657 5.291077,0l0,7.370999l4.377491,0l0,-8.89101c0,-6.915523 -7.829986,-6.66365 -9.669445,-3.259423l0,-1.891237z"/>
    
  </svg>
</i>
            </span>
          </a><a class="level-item" aria-label="email" href='mailto:shehadeh.net'
            target='_blank' rel='me noopener'>
            <span class="icon">
              <i class><svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
    <polyline points="22,6 12,13 2,6"/>
    
  </svg>
</i>
            </span>
          </a><a class="level-item" aria-label="rss" href='/index.xml'
            target='_blank' rel='me noopener'>
            <span class="icon">
              <i class><svg viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
    
    <path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle>
    
  </svg>
</i>
            </span>
          </a></nav>
      </div>
    </nav>

    <nav class="nav">
      
      <div class="nav-left"><a class="nav-item" href="/about">
          <h2 class="title is-5">About</h2>
        </a></div>
      

      
    </nav>

  </div>
  <script src="/js/navicon-shift.js"></script>
</section>

<section class="section">
  <div class="container">
    <div class="subtitle tags is-6 is-pulled-right">
      
    </div>
    
    <h2 class="subtitle is-6">November 7, 2024</h2>
    
    <h1 class="title">Why Write a Programming Language</h1>
    
    <div class="content">
      <h1 id="programming-with-precise-integers">Programming with Precise Integers</h1>
<p>Howlite closely tracks the value of integers.
You can declare a type that may only have the value <code>1</code>, and another type that only allows the value <code>0</code>.
Using this scheme, we can define a boolean (note <code>|</code> is type union):</p>
<pre tabindex="0"><code>type Boolean = 0 | 1

let true: Boolean = 0;
let false: Boolean = 1;
</code></pre><p>That&rsquo;s nice, but booleans aren&rsquo;t a particular interesting language feature.
How do these actually help us write programs?</p>
<p>Take a look at this implementation of <code>index_of</code>, which looks for an a character in an ASCII string.</p>
<pre tabindex="0"><code>type char = 0..127;
type i32 = -2_147_483_648..2_147_483_647;
type PositiveI32 = 0..2_147_483_647;

func index_of[LenT: PositiveI32](str: &amp;[char; LenT], chr: char): 0..LenT | -1 {
  let i: u32 = 0;
  while i &lt; str.len {
    if str[i] == chr {
      return i;
    }

    i += 1;
  }

  -1
}
</code></pre><p>There&rsquo;s quite a bit here, let&rsquo;s unpack it line by line. First,
the type definitions</p>
<ul>
<li><code>type char = 0..127;</code> - represents a 7-bit ascii digit, notice we don&rsquo;t have to round up to 8 bits here.</li>
<li><code>type i32 = -2_147_483_648..2_147_483_647;</code> - This is just a normal 32-bit integer.</li>
<li><code>type PositiveI32 = 0..2_147_483_647;</code> - We need a number that&rsquo;s a 32-bit signed integer under the hood, but it can&rsquo;t be negative, we&rsquo;ll use negative numbers to signal no value.</li>
</ul>
<p>This function is generic, the <code>[LenT: PositiveI32]</code> section says &ldquo;for any subset of the positive, signed, 32-bit integers, there is an instance of <code>index_of</code>&rdquo;.
Whatever that type is, we&rsquo;ll call it <code>LenT</code>.</p>
<p>Moving on to the parameter list, notice the type of <code>str</code>: <code>&amp;[char; LenT]</code>.
This <code>&amp;[...]</code> is a special type called a <em>slice</em> (also know as a fat pointer).
Really, under the hood it&rsquo;s just a pointer and length pair, practically it functions like an array.
These types are common, they&rsquo;re primitives in Rust, Go, and Zig.
Although it&rsquo;s not a primitive type, the C++ STL&rsquo;s <code>std::string_view</code> is a similar data structure.
What sets our slice&rsquo;s apart is that the type of the length can be set.
So, for example say we take a slice of some ASCII string, from index 3 to 10, the result would have the type <code>&amp;[char; 7]</code>.</p>
<p>By using a generic parameter, <code>LenT</code>, then giving <code>str</code> the type <code>&amp;[char; LenT]</code>.
We&rsquo;re saying &ldquo;this function works on a string of any lenght less than or equal to 2,147,483,647&rdquo;,
Since it&rsquo;s impossible to find a character outside of those bounds, we know the return type can&rsquo;t exceed the maximum value of <code>LenT</code>.</p>
<p>Finally, let&rsquo;s look at the core of this function.</p>
<pre tabindex="0"><code>let i: u32 = 0;
while i &lt; str.len {
  if str[i] == chr {
    return i;
  }

  i = i + 1;
}

-1
</code></pre><p>Most of this is fairly typicall, but remeber, we&rsquo;re only allowed to return values that are less than or equal to the max value of <code>LenT</code>, or <code>-1</code>.
How do we know that <code>i</code> is always a subset of the return type, since <code>u32</code> certainly exceeds <code>LenT</code>.
The condition <code>while i &lt; str.len</code>, narrows <code>i</code>&rsquo;s type from <code>u32</code> to <code>0..LenT-1</code>.
Within the body of that loop, <code>i</code> can be used as if it had the type <code>0..LenT-1</code>.
Arithmetic changes this, of course, after running <code>i += 1</code>, <code>i</code>&rsquo;s type is now <code>1..LenT</code>.
If we changed the code to check some other condition, for example <code>chr &lt; str.len</code>, this wouldn&rsquo;t compile.</p>
<p>There&rsquo;s a lot more you can do with this type system - are those things useful?
Who knows, but it&rsquo;s certainly an interesting exercise.
Stay tuned for Storage Classes, arithmetic on sparse sets, and constraint solving.</p>

      
    </div>
    
  </div>
</section>



<section class="section">
  <div class="container has-text-centered">
    <p></p>
    
  </div>
</section>





</body>
</html>

